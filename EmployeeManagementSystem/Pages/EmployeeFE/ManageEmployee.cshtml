@page "{id?}"
@model EmployeeManagementSystem.Pages.EmployeeFE.ManageEmployeeModel
@{
    ViewData["Title"] = Model.Employee?.Id > 0 ? "Edit Employee" : "Add New Employee";
}
@using EmployeeManagementSystem.Helper;

<div class="manage-employee-card">
    <h2 class="my-4">
        @(Model.Employee?.Id > 0 ? "Edit Employee" : "Add New Employee")
    </h2>

    <form method="post" enctype="multipart/form-data" novalidate>
        <input type="hidden" asp-for="Employee.Id" />

        <div class="mb-3">
            <label asp-for="Employee.FirstName" class="form-label"></label>
            <input asp-for="Employee.FirstName" class="form-control" />
            @Html.ValidationMessageCustomFor(m => m.Employee.FirstName)

        </div>

        <div class="mb-3">
            <label asp-for="Employee.LastName" class="form-label"></label>
            <input asp-for="Employee.LastName" class="form-control" />
            <span asp-validation-for="Employee.LastName" class="text-danger"></span>
            @Html.ValidationMessageCustomFor(m => m.Employee.LastName)


        </div>

        <div class="mb-3">
            <label asp-for="Employee.PhoneNumber" class="form-label"></label>
            <input asp-for="Employee.PhoneNumber" class="form-control" />
            <span asp-validation-for="Employee.PhoneNumber" class="text-danger"></span>
            @Html.ValidationMessageCustomFor(m => m.Employee.PhoneNumber)
        </div>

        <div class="mb-3">
            <label asp-for="Employee.Email" class="form-label"></label>
            <input asp-for="Employee.Email" class="form-control" />
            @Html.ValidationMessageCustomFor(m => m.Employee.Email)
        </div>

        <div class="mb-3">
            <label asp-for="Employee.Salary" class="form-label"></label>
            <input asp-for="Employee.Salary" class="form-control" type="number" step="0.01" />
            @Html.ValidationMessageCustomFor(m => m.Employee.Salary)
        </div>

        <div class="mb-3">
            <label asp-for="Employee.Position" class="form-label"></label>
            <select asp-for="Employee.Position" class="form-control js-example-tags" asp-items="Model.PositionOptions">
                <option value="" disabled selected hidden>Select your position</option>
            </select>
            @Html.ValidationMessageCustomFor(m => m.Employee.Position)
        </div>

        <div class="mb-3">
            <label asp-for="Employee.DateOfBirth" class="form-label"></label>
            <input asp-for="Employee.DateOfBirth" class="form-control datepicker-dob" type="date" />
            @Html.ValidationMessageCustomFor(m => m.Employee.DateOfBirth)
        </div>

        <div class="mb-3">
            <label asp-for="Employee.HireDate" class="form-label"></label>
            <input asp-for="Employee.HireDate" class="form-control datepicker-booking" type="text" />
            @Html.ValidationMessageCustomFor(m => m.Employee.HireDate)
        </div>

        <div class="mb-3">
            <label class="form-label">Profile Image</label>
            <input id="fileInput" type="file" name="ProfileImageFile" style="display:none;" />
            <div id="myDropzone" class="dropzone" data-existing="@(
    (Model.Employee != null && Model.Employee.Id > 0 && !string.IsNullOrEmpty(Model.Employee.ProfileImage))
        ? Url.Content(Model.Employee.ProfileImage)
        : ""
)">
                <div class="dz-message">Drop files here or click to upload.</div>
            </div>

        </div>



        <button type="submit" class="btn btn-primary">
            @(Model.Employee?.Id > 0 ? "Update Employee" : "Save Employee")
        </button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/Flatpick/flatpickrHelper.js"></script>
    <script src="~/js/Flatpick/flatpickrHelperImp.js"></script>
    <script src="~/js/Select2/select2.js"></script>
    <script src="~/js/Dropzon/dropzon.js"></script>
}

@section Styles {
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/Dropzon/dropzone.css" />
    <link rel="stylesheet" href="~/css/pages/ManageEmployee.css" />

}
